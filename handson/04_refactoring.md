# ToDoリスト開発ハンズオン (4/4) - 仕上げ

## ステップ5：リファクタリングと仕上げ

コードをより良くするために、リファクタリング（構造の改善）を行います。

### 1. 課題の発見
現在のコードは、JSONファイルの読み書き処理が各関数（`add`, `list`, `done`, `delete`）に散らばっており、重複しています。これを共通の関数にまとめます。

### 2. リファクタリング
ファイルの読み込みと書き込みを、それぞれ別の関数に分離します。

**【やってみよう】**
Geminiに以下の指示を出してください。

```
`src/todo.py` を読み込んで、リファクタリングしてください。

- `tasks.json` の読み込み処理を `load_tasks()` という名前の関数にまとめる。この関数はタスクのリストを返す。
- `tasks.json` の書き込み処理を `save_tasks(tasks)` という名前の関数にまとめる。この関数はタスクのリストを引数として受け取る。
- `add`, `list`, `done`, `delete` の各処理を、新しい `load_tasks()` と `save_tasks()` を使うように修正する。
- C#コードは日本語でコードコメント、XMLコメント(クラス、フィールド、メソッド)を記載してください
```

### 3. コードの保存と最終確認
生成されたコードで `src/todo.py` を上書きし、これまでの機能（`add`, `list`, `done`, `delete`）がすべて問題なく動作するか、一通り試してください。

### 4. 最終コミット
`git add .` と `git commit -m "refactor: Improve file I/O handling"` を実行してください。

---

これでハンズオンは完了です！お疲れ様でした。
